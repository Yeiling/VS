<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.nlog-project.org/schemas/NLog.xsd NLog.xsd"
      autoReload="true"
      throwExceptions="false"
      internalLogLevel="Off" internalLogFile="c:\temp\nlog-internal.log">

  <targets>
    <default-wrapper xsi:type="BufferingWrapper" bufferSize="0" FlushTimeout="10000">
      <wrapper-target xsi:type="AsyncWrapper"/>
    </default-wrapper>
    <target xsi:type="Database" name="LMDBLogTarget">
      <!-- 数据库链接字段 -->
      <dbProvider>System.Data.SqlClient</dbProvider>
      <connectionString>server=39.105.178.182:3588;Initial Catalog=SYT_apiDB_Test;Persist Security Info=True;User ID=Test_sa;Password=data2018!;</connectionString>
      <!-- SQL command to be executed for each entry -->
      <commandText>
        INSERT INTO [SystemLogs](createDate,origin,logLevel,message,stackTrace)
        VALUES(@createDate,@origin,@logLevel,@message,@stackTrace)
      </commandText>
      <!-- parameters for the command -->
      <!--创建日期-->
      <parameter name="@createDate" layout="${event-properties:item=createDate}" />
      <!--日记来源-->
      <parameter name="@origin" layout="${event-properties:item=origin}" />
      <!--日志级别-->
      <parameter name="@logLevel" layout="${event-properties:item=logLevel}" />
      <!--异常信息-->
      <parameter name="@message" layout=" ${event-properties:item=message}" />
      <!--堆栈信息-->
      <parameter name="@stackTrace" layout="${event-properties:item=stackTrace}" />
    </target>
  </targets>

  <rules>
    <logger name="LMDBLog" minlevel="Debug" writeTo="LMDBLogTarget" final="true"  />
  </rules>
</nlog>
